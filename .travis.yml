matrix:
  include:
    - language: java
      jdk: oraclejdk15
      dist: trusty
      addons:
        sonarcloud:
          organization: "our-fancy-team-name" # the key of the org you chose at step #3
      before_install:
        - chmod +x mvnw
      script:
        #        - if [ $TRAVIS_PULL_REQUEST == "false" ]; then npm run-script travisSonarBranch --prefix office-space-frontend/src/main/web/office-space-web; else npm run-script travisSonarPR --prefix office-space-frontend/src/main/web/office-space-web; fi
        - ./mvnw clean verify sonar:sonar -Pno-front-end -Dsonar.projectKey=our-fancy-team-name_office-space
      cache:
        directories:
          - $HOME/.m2
    #          - office-space-frontend/src/main/web/office-space-web/node_modules
    - language: node_js
      node_js: 12
      dist: trusty
      script:
        - npm run-script build --prefix office-space-frontend/src/main/web/office-space-web
        - if [ $TRAVIS_PULL_REQUEST == "false" ]; then npm run-script travisSonarBranch --prefix office-space-frontend/src/main/web/office-space-web; else npm run-script travisSonarPR --prefix office-space-frontend/src/main/web/office-space-web; fi
      cache:
        directories:
          - office-space-frontend/src/main/web/office-space-web/node_modules